# API Keys & Services
# -------------------

# ==============================================================================
# AI 智能搜索配置 (可选)
# ==============================================================================
ai_search:
  # 您的 AI 搜索服务 API 密钥
  api_key: "YOUR_AI_SEARCH_API_KEY"
  # 您的 AI 搜索服务 API 端点 URL
  api_url: "http://127.0.0.1:8004/api/videos/text"

# 前往 https://www.pexels.com/api/ 获取你的免费API Key
pexels:
  api_host: "https://api.pexels.com"
  api_key: "YOUR_PEXELS_API_KEY"

# 前往 https://pixabay.com/api/docs/ 获取你的免费API Key
pixabay:
  api_host: "https://pixabay.com"
  api_key: "YOUR_PIXABAY_API_KEY"

# ==============================================================================
# 大语言模型 (LLM) 提供商配置
# ==============================================================================
llm_providers:
  # 设置默认使用的LLM服务 (例如: "ollama", "gemini", "siliconflow")
  default: "ollama"

  # 本地 Ollama 服务配置
  ollama:
    enabled: true
    model: "qwen3:14b-q8_0" # 或者 "llama3" 等你已在本地拉取的模型
    host: "http://127.0.0.1:11434" # Ollama服务地址
    remark: "本地模型服务，适用于关键词提取和场景分割"

  # Google Gemini (可选)
  gemini:
    enabled: false # 默认禁用，需要时请设为 true
    api_key: "YOUR_GEMINI_API_KEY"
    remark: "Google Gemini，用作备用关键词提取方案"

  # 硅基流动 (SiliconFlow) (可选)
  siliconflow:
    enabled: false # 默认禁用，需要时请设为 true
    api_key: "YOUR_SILICONFLOW_API_KEY"
    model: "Qwen/Qwen2-7B-Instruct"
    host: "https://api.siliconflow.cn/v1"
    remark: "硅基流动, 用于生成视频脚本和关键词"

# ==============================================================================
# API 服务器配置
# ==============================================================================
api_server:
  # 请修改为一个更长、更随机的安全密钥，例如通过密码管理器生成
  secret_key: "CHANGE_THIS_TO_A_LONG_RANDOM_SECRET_KEY"

# ==============================================================================
# 视频输出设置
# ==============================================================================
video:
  width: 1920
  height: 1080
  fps: 30
  max_clip_duration: 8.0
  min_clip_duration: 3.0

  subtitles:
    font_dir: "assets/fonts"
    font_name: "港风繁体-方正粗宋繁体"
    font_size: 24
    primary_color: "&H00FFFFFF"
    outline_color: "&H00000000"
    border_style: 1
    outline: 1
    shadow: 0
    spacing: 0.5
    alignment: 2
    vertical_margin: 30

# ==============================================================================
# 文件路径设置
# ==============================================================================
paths:
  local_assets_dir: "assets/local"

# ==============================================================================
# 素材搜索策略
# ==============================================================================
asset_search:
  online_search_count: 15
  max_keyword_retries: 2
  request_delay_seconds: 1
  fallback_en:
    - healthy lifestyle
    - wellness routine
    - exercise motion
  fallback_cn:
    - 健康生活方式
    - 养生日常
    - 运动镜头

# ==============================================================================
# 场景检测参数
# ==============================================================================
scene_detection:
  splitter:
    chunk_size: 50
    overlap: 10

# ==============================================================================
# Prompt Engineering
# ==============================================================================
prompts:
  scene_splitter: |
    You are an expert in video editing. Your task is to analyze a script with numbered lines and identify the natural break points where a scene should change. A scene change can be indicated by a shift in topic, location, time, or emotional tone.
    Your response MUST be a comma-separated list of the line numbers that mark the END of each scene.
    For example, if the scenes end at lines 4, 8, and 12, your output should be "4, 8, 12".
    Do not include any other text, explanations, or formatting.

    Here is the script chunk:
    ---
    {numbered_text}
    ---

  keyword_generator: |
    You are a creative director and shot-list creator for health & wellness video production.
    Use the following weighted keyword categories as a guide when generating stock-footage search terms:
      • 20% 症状与病因 (symptom & cause)
      • 20% 食材与营养 (ingredient & nutrition)
      • 15% 运动与体式 (exercise & posture)
      • 10% 日常习惯 (daily habits)
      • 10% 心理调节 (mental regulation)
      • 10% 治疗与预防 (treatment & prevention)
      • 5%  数据与案例 (data & case examples)
      • 10% 专家建议 (expert advice)

    Based on the scene description, your task is:
    1. Add appropriate punctuation to the original text to make it a natural, readable sentence.

    2. Create a list of up to **6** English keywords for stock-footage searches.
      - Keywords must be concrete, visual, action-oriented.
      - Keywords must be mutually distinct (no same-core-concept or simple synonym).
      - Sort by relevance (highest first).
      - From these 6, select the top **3** unique keywords (highest relevance first).

    3. Create a list of up to **6** Chinese keywords that describe a sequence of shots (storyboard style).
      - Keywords must be concrete, visual, action-oriented.
      - Keywords must be mutually distinct (no same-core-concept or simple synonym).
      - Sort by relevance (highest first).
      - From these 6, select the top **3** unique keywords (highest relevance first).

    You MUST return your response as a single, valid JSON object. Do not include any other text or explanations.

    Example:
    Scene Description: "一位45岁的上班族女性每天坚持晨跑5公里，以提升体能和减压"
    Your JSON Response:
    {{
      "punctuated_text": "一位45岁的上班族女性，每天坚持晨跑5公里，以提升体能和减压。",
      "keywords_en": ["morning jogging", "urban runner", "stress relief exercise"],
      "keywords_cn": ["上班族女性晨跑", "城市慢跑", "减压运动"]
    }}

    Now, process the following scene.

    Scene Description: "{scene_text}"

    Your JSON Response:

  asset_keyword_generator:
    system: |
      You are an AI assistant that helps find stock video footage. Your task is to generate new, diverse, and specific English keywords based on a scene description and a list of keywords that have already been tried and failed.
      The new keywords should be concrete, visual, and describe actions, objects, or moods.
      Your response MUST be a comma-separated list of 3-5 new keywords. Do not include any of the already tried keywords. Do not include any other text, explanations, or formatting.
    user: |
      The following keywords have already been tried and failed: {existing_keywords}
      Generate new, different keywords for this scene: "{scene_text}"

# ==============================================================================
# General Settings
# ==============================================================================
# 设置为 true 以在视频合成时启用详细的 ffmpeg 日志，便于排查问题。
debug: false
